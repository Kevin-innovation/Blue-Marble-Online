# 마블룰 설계서 (marblerule.md)

본 문서는 온라인 부루마블(Blue Marble Online)의 기본 규칙과 시스템 설계 기준을 정의합니다. 나무위키의 부루마블 규칙을 참고하여 요약/정리했습니다.

## 1. 게임 구성 요소
- 플레이어: 2~4인
- 보드: 시작(Start), 도시/지역 칸, 황금열쇠, 무인도, 사회복지기금, 세계여행, 우주여행 등
- 자원: 현금, 자산(땅/건물), 카드(황금열쇠 효과)
- 주사위: 2D6

## 2. 턴 진행
1) 주사위를 굴린다 (더블 시 추가 턴, 3연속 더블 시 무인도)
2) 말 이동 후 도착 칸 효과 처리
3) 거래/구매/건설/청산 처리
4) 턴 종료

## 3. 칸 효과 요약
- 시작: 통과 시 급여(+200K 등, 밸런싱값 TBD)
- 일반 도시: 미소유 시 구매 가능, 소유 시 통행료 지불, 본인 소유 시 건설 가능
- 황금열쇠: 카드 드로우 후 즉시 적용 (이동/수입/지출/면제 등)
- 무인도: n턴 행동 불가(더블 시 탈출)
- 사회복지기금: 납부/수령 이벤트
- 세계/우주여행: 원하는 칸/특정 칸으로 이동

## 4. 자산 및 건설
- 토지 → 별장 → 빌딩 → 호텔 단계적 업그레이드
- 통행료는 토지/건물 레벨과 세트 보너스에 비례하여 증가
- 동일 색상 세트 완성 시 건설 제한 해제 및 보너스 적용

## 5. 파산과 승리 조건
- 지불 불능 시 보유 자산을 담보/매각, 그래도 불능이면 파산 처리
- 마지막 생존자 또는 제한 턴 종료 시 최고 자산 플레이어가 승리

## 6. 룰 변수(파라미터)
- 시작 급여, 칸 수, 건설 비용/통행료 계수, 무인도 턴 수 등 환경 설정값으로 분리(config)

## 7. 온라인 규칙 특이사항
- 턴 타이머, 자동 스킵, 재접속 동기화
- 임의 이벤트 난수는 서버에서 시드 관리 및 검증 로그 기록
- 치트 방지: 클라이언트는 렌더/입력만, 권한 검증은 서버에서 처리

## 8. 네트워크 프로토콜 개요
- 실시간: WebSocket(JSON)
- 이벤트 예시: roll, move, buy, build, pay, card, endTurn, bankrupt, syncState

## 9. 데이터 모델 초안
- Player { id, name, cash, assets[], position, jailTurns }
- Tile { id, type, price, rentTable[], ownerId }
- GameState { players[], turnIndex, board[], bank, pot, log[] }

## 10. 테스트/밸런싱 노트
- 통과 급여/통행료 기대값을 주사위 분포에 맞춰 시뮬레이션 예정
- 황금열쇠 카드 풀은 단계적으로 추가하고 로그 기반으로 조정

참고: 규칙 요약은 나무위키 ‘부루마블’ 문서 내용을 바탕으로 정리했으며, 실제 구현 시 프로젝트 정책에 맞게 재조정합니다.
